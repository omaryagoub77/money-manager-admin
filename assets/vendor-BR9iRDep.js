var l=class{constructor(e=0,t="Network Error"){this.status=e,this.text=t}};const S=()=>{if(!(typeof localStorage>"u"))return{get:e=>Promise.resolve(localStorage.getItem(e)),set:(e,t)=>Promise.resolve(localStorage.setItem(e,t)),remove:e=>Promise.resolve(localStorage.removeItem(e))}},s={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:S()},p=e=>e?typeof e=="string"?{publicKey:e}:e.toString()==="[object Object]"?e:{}:{},T=(e,t="https://api.emailjs.com")=>{if(!e)return;const r=p(e);s.publicKey=r.publicKey,s.blockHeadless=r.blockHeadless,s.storageProvider=r.storageProvider,s.blockList=r.blockList,s.limitRate=r.limitRate,s.origin=r.origin||t},v=async(e,t,r={})=>{const i=await fetch(s.origin+e,{method:"POST",headers:r,body:t}),a=await i.text(),n=new l(i.status,a);if(i.ok)return n;throw n},w=(e,t,r)=>{if(!e||typeof e!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!t||typeof t!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!r||typeof r!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},H=e=>{if(e&&e.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},k=e=>e.webdriver||!e.languages||e.languages.length===0,f=()=>new l(451,"Unavailable For Headless Browser"),U=(e,t)=>{if(!Array.isArray(e))throw"The BlockList list has to be an array";if(typeof t!="string")throw"The BlockList watchVariable has to be a string"};var V=e=>!e.list?.length||!e.watchVariable,_=(e,t)=>e instanceof FormData?e.get(t):e[t];const R=(e,t)=>{if(V(e))return!1;U(e.list,e.watchVariable);const r=_(t,e.watchVariable);return typeof r!="string"?!1:e.list.includes(r)},P=()=>new l(403,"Forbidden"),D=(e,t)=>{if(typeof e!="number"||e<0)throw"The LimitRate throttle has to be a positive number";if(t&&typeof t!="string")throw"The LimitRate ID has to be a non-empty string"};var E=async(e,t,r)=>{const i=Number(await r.get(e)||0);return t-Date.now()+i};const L=async(e,t,r)=>{if(!t.throttle||!r)return!1;D(t.throttle,t.id);const i=t.id||e;return await E(i,t.throttle,r)>0?!0:(await r.set(i,Date.now().toString()),!1)},j=()=>new l(429,"Too Many Requests"),F=async(e,t,r,i)=>{const a=p(i),n=a.publicKey||s.publicKey,d=a.blockHeadless||s.blockHeadless,u=a.storageProvider||s.storageProvider,m={...s.blockList,...a.blockList},b={...s.limitRate,...a.limitRate};return d&&k(navigator)?Promise.reject(f()):(w(n,e,t),H(r),r&&R(m,r)?Promise.reject(P()):await L(location.pathname,b,u)?Promise.reject(j()):v("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:n,service_id:e,template_id:t,template_params:r}),{"Content-type":"application/json"}))},K=e=>{if(!e||e.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"};var I=e=>typeof e=="string"?document.querySelector(e):e;const B=async(e,t,r,i)=>{const a=p(i),n=a.publicKey||s.publicKey,d=a.blockHeadless||s.blockHeadless,u=s.storageProvider||a.storageProvider,m={...s.blockList,...a.blockList},b={...s.limitRate,...a.limitRate};if(d&&k(navigator))return Promise.reject(f());const h=I(r);w(n,e,t),K(h);const c=new FormData(h);return R(m,c)?Promise.reject(P()):await L(location.pathname,b,u)?Promise.reject(j()):(c.append("lib_version","4.4.1"),c.append("service_id",e),c.append("template_id",t),c.append("user_id",n),v("/api/v1.0/email/send-form",c))};var C={init:T,send:F,sendForm:B,EmailJSResponseStatus:l},o=[];for(let e=0;e<256;++e)o.push((e+256).toString(16).slice(1));function O(e,t=0){return(o[e[t+0]]+o[e[t+1]]+o[e[t+2]]+o[e[t+3]]+"-"+o[e[t+4]]+o[e[t+5]]+"-"+o[e[t+6]]+o[e[t+7]]+"-"+o[e[t+8]]+o[e[t+9]]+"-"+o[e[t+10]]+o[e[t+11]]+o[e[t+12]]+o[e[t+13]]+o[e[t+14]]+o[e[t+15]]).toLowerCase()}var g,q=new Uint8Array(16);function x(){if(!g){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");g=crypto.getRandomValues.bind(crypto)}return g(q)}var M=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),y={randomUUID:M};function N(e,t,r){e=e||{};const i=e.random??e.rng?.()??x();if(i.length<16)throw new Error("Random bytes length must be >= 16");if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,t){if(r=r||0,r<0||r+16>t.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let a=0;a<16;++a)t[r+a]=i[a];return t}return O(i)}function A(e,t,r){return y.randomUUID&&!t&&!e?y.randomUUID():N(e,t,r)}var J=A;export{C as n,J as t};
